<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMReassignedClaims_Extension</Name>
	<SourceCode>
		<Declaration><![CDATA[
[ExtensionOf(formStr(HMReassignedClaims))]
final class HMReassignedClaims_Extension
{
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>assignPoolAndAgent</Name>
				<Source><![CDATA[
    public void assignPoolAndAgent(HMClaimTable _hmClaimTable,CustCollectionsPool _custCollectionsPool, RecId _agentId, str _agentName)
    {
        HMInsuranceCarrier          hmInsuranceCarrier;
        str                         errorMsg;

        next assignPoolAndAgent(_hmClaimTable, _custCollectionsPool, _agentId, _agentName);

        select firstonly HMIsRestricted from hmInsuranceCarrier
                    where hmInsuranceCarrier.RecId == _hmClaimTable.HMInsuranceCarrier;

        if(!((_custCollectionsPool.HMIsRestricted == NoYes::Yes &&
                    hmInsuranceCarrier.HMIsRestricted == NoYes::Yes)
                    ||
                    (_custCollectionsPool.HMIsRestricted == NoYes::No &&
                    hmInsuranceCarrier.HMIsRestricted == NoYes::No)))
        {
            errorMsg = _custCollectionsPool.HMIsRestricted == NoYes::Yes ? "Assignment of restricted pool to a non restricted payor is not allowed" : "Assignment of non restricted pool to a restricted payor is not allowed";
            throw Error(strFmt("%1",errorMsg));
        }
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
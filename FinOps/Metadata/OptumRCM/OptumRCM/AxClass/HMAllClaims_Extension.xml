<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMAllClaims_Extension</Name>
	<SourceCode>
		<Declaration><![CDATA[
[ExtensionOf(formStr(HMAllClaims))]
final class HMAllClaims_Extension
{

}
]]></Declaration>
		<Methods>
			<Method>
				<Name>run</Name>
				<Source><![CDATA[
    public void run()
    {
        next run();

        if(!CustCollectionsAgent::IsCurrentAgentSupervisorOrManager())
        {
            AssignPriorityToClaim.visible(false);
        }

        FormRun             formRun = this as FormRun;
        FormDataSource      hmClaimTable_ds = formRun.datasource(FormDatasourceStr(HMAllClaims, HMClaimTable));
        HMClaimTable        claim = hmClaimTable_ds.Cursor();
        HMClaimTable        claimTable;
        HMClaimTableDetails claimTableDetails;

        select sum(ClaimAmount),sum(HMExpectedAmount) from claimTable
            where  claimTable.CaseNo == claim.CaseNo
                join sum(HMAmountPaid),sum(HMBalanceAmount),sum(RevisedAmount), sum(TotalChargeAmount) from claimTableDetails
                    where claimTableDetails.HMClaimTable == claimTable.RecId;

        HMClaimAmount.realValue(claimTable.ClaimAmount);
        HMExpectedAmount.realValue(claimTable.HMExpectedAmount);
        HMAmountPaid.realValue(claimTableDetails.HMAmountPaid);
        HMBalanceAmount.realValue(claimTableDetails.HMBalanceAmount);
        RevisedAmount.realValue(claimTableDetails.RevisedAmount);
        TotalChargeAmount.realValue(claimTableDetails.TotalChargeAmount);
        
	}

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
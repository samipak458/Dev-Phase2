<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HmContractOrpPlanStatus</Name>
	<SourceCode>
		<Declaration><![CDATA[
class HmContractOrpPlanStatus extends RunBaseBatch
{
    HMInsuranceContract             HMInsuranceContract;
    HMInsuranceContractClassOrPlans HMInsuranceContractClassOrPlans;
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>run</Name>
				<Source><![CDATA[
    Public  void run()
    {
        try
        {
            ttsBegin;
            while select forUpdate *from HMInsuranceContract where HMInsuranceContract.HMContractEndDate == DateTimeUtil::getToday(DateTimeUtil::getUserPreferredTimeZone())
            {
                HMInsuranceContract.HMContractStatus = HMContractStatus::InActive;
                while select forUpdate *from HMInsuranceContractClassOrPlans where HMInsuranceContractClassOrPlans.HMInsuranceContract == HMInsuranceContract.RecId
                {
                    HMInsuranceContractClassOrPlans.HMContractClassStatus= HMContractClassStatus::Inactive;
                    HMInsuranceContractClassOrPlans.update();
                }
                HMInsuranceContract.update();
            }
            ttsCommit;
        }
        catch (Exception::Error)
        {
            throw error ("Process Fail, cannot update Contract and plan status");
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>description</Name>
				<Source><![CDATA[
    client server static ClassDescription description()
    {
        return "Mark all inactive contract and plan ";
    }

]]></Source>
			</Method>
			<Method>
				<Name>main</Name>
				<Source><![CDATA[
    static void main(Args _args)
    {
        HmContractOrpPlanStatus objClass = new HmContractOrpPlanStatus();
    
        //prompt for runbase framework dialog
        if (objClass.prompt())
        {
           //run the process
           objClass.run();
        }
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
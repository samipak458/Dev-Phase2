<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMSalesTableType_Extension</Name>
	<SourceCode>
		<Declaration><![CDATA[
using System.Reflection;

[ExtensionOf(classStr(SalesTableType))]
final class HMSalesTableType_Extension
{
    public SalesTable   salesTableEx;
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>setSalesTable</Name>
				<Source><![CDATA[
    public void setSalesTable(SalesTable _salesTable)
    {
        var bindFlags = BindingFlags::Instance | BindingFlags::NonPublic;
        var field = this.GetType().GetField(identifierStr(salesTable), bindFlags);

        if(field)
        {
            salesTableEx = field.GetValue(this);
        }
    }
    /*
    public void modifiedField(FieldId _fieldId
        , TableId _tableId = tableNum(SalesTable)
        , boolean _uiEnabled = true
        )
    {
        HMOrganizationalUnit    hmOrganizationalUnit;

        if(_tableId == tableNum(SalesTable))
        {
                switch(_fieldId)
                {
                    case fieldNum(SalesTable, HMOrganizationalUnit):
                        select InventLocation from hmOrganizationalUnit
                            where hmOrganizationalUnit.RecId == salesTableEx.HMOrganizationalUnit;

                        if(hmOrganizationalUnit)
                        {
                            salesTableEx.InventLocationId = hmOrganizationalUnit.InventLocation;
                            salesTableEx.InventSiteId = InventLocation::find(salesTable.InventLocationId).InventSiteId;
                            if(hmOrganizationalUnit.TaxGroup)
                            {
                                salesTableEx.TaxGroup = hmOrganizationalUnit.TaxGroup;
                            }
                            //TODO: for medisys only
                            //if(SalesTable.DefaultDimension && SalesTable.HMOrganizationalUnit)
                            //{
                            //    salesTableEx.DefaultDimension = this.setDimensionAccount(SalesTable.DefaultDimension,SalesTable.HMOrganizationalUnit);
                            //}

                        }
                        break;

                }
         }
         next modifiedField(_fieldId, _tableId, true);
    }
    */

    ///// <summary>
    /////
    ///// </summary>
    ///// <param name="args"></param>
    //[PostHandlerFor(classStr(SalesTableType), methodStr(SalesTableType, modifiedField))]
    //public static void SalesTableType_Post_modifiedField(XppPrePostArgs args)
    //{
    //    HMOrganizationalUnit    hmOrganizationalUnit;
    //    SalesTableType salesTableType = args.getThis();
    //    SalesTable  salesTableEx = args.getArg(identifierStr(salesTableEx));
    //    TableId _tableId = args.getArg(identifierStr(_tableId));
    //    FieldId _fieldId = args.getArg(identifierStr(_fieldId));

    //    if(_tableId == tableNum(SalesTable))
    //    {
    //        switch(_fieldId)
    //        {
    //            case fieldNum(SalesTable, HMOrganizationalUnit):
    //                select InventLocation from hmOrganizationalUnit
    //                    where hmOrganizationalUnit.RecId == salesTableEx.HMOrganizationalUnit;

    //                if(hmOrganizationalUnit)
    //                {

    //                }
    //                break;

    //        }
    //    }
    //}

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
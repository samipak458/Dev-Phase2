<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMPatientRegistrationRequest</Name>
	<SourceCode>
		<Declaration><![CDATA[
class HMPatientRegistrationRequest
{
    HMRegistrationRequestNationalId nationalId;
    HMRegistrationRequestAge age;
    HMRegistrationRequestBirthDate birthDate;
    HMRegistrationRequestContact contact;
    HMRegistrationRequestGender gender;
    HMRegistrationRequestTokenNumber tokenNumber;
    HMRegistrationRequestNumber requestNumber;
    HMRegistrationRequestName name;
    RecId recId;
    RecId reasonTable;
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>cancelRequest</Name>
				<Source><![CDATA[
    public boolean cancelRequest()
    {
        HMRegistrationRequest hmRegistrationRequestLocal;
    
        try
        {
            ttsBegin;
    
            hmRegistrationRequestLocal = HMRegistrationRequest::find(this.parmRecId(), true);
    
            hmRegistrationRequestLocal.ReasonTableCancel = this.parmReasonTable();
    
            hmRegistrationRequestLocal.Status = HMRegistrationRequestStatus::Cancelled;
    
            if(this.validateCancel() && hmRegistrationRequestLocal.validateWrite())
            {
                hmRegistrationRequestLocal.update();
                ttsCommit;
                return true;
            }
            else
            {
                throw error("@MAZ8819");
            }
    
        }
        catch
        {
            error("@MAZ8821");
            return false;
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>createRequest</Name>
				<Source><![CDATA[
    public boolean createRequest()
    {
        HMRegistrationRequest hmRegistrationRequestLocal;
    
        try
        {
            hmRegistrationRequestLocal.initValue();
            hmRegistrationRequestLocal.NationalId = this.parmNationalId();
            hmRegistrationRequestLocal.Age = this.parmAge();
            hmRegistrationRequestLocal.BirthDate = this.parmBirthDate();
            hmRegistrationRequestLocal.Contact = this.parmContact();
            hmRegistrationRequestLocal.Gender = this.parmGender();
            hmRegistrationRequestLocal.TokenNumber = this.parmTokenNumber();
            hmRegistrationRequestLocal.RequestNumber = this.parmRequestNumber();
            hmRegistrationRequestLocal.Name = this.parmName();
            hmRegistrationRequestLocal.Status = HMRegistrationRequestStatus::New;
    
            if(hmRegistrationRequestLocal.validateWrite())
            {
                hmRegistrationRequestLocal.insert();
                return true;
            }
            else
            {
                throw error("@MAZ8819");
            }
    
        }
        catch
        {
            error("@MAZ8820");
            return false;
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmAge</Name>
				<Source><![CDATA[
    public HMRegistrationRequestAge parmAge(HMRegistrationRequestAge _age = age)
    {
        age = _age;
    
        return age;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmBirthDate</Name>
				<Source><![CDATA[
    public HMRegistrationRequestBirthDate parmBirthDate(HMRegistrationRequestBirthDate _birthDate = birthDate)
    {
        birthDate = _birthDate;
    
        return birthDate;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmContact</Name>
				<Source><![CDATA[
    public HMRegistrationRequestContact parmContact(HMRegistrationRequestContact _contact = contact)
    {
        contact = _contact;
    
        return contact;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmGender</Name>
				<Source><![CDATA[
    public HMRegistrationRequestGender parmGender(HMRegistrationRequestGender _gender = gender)
    {
        gender = _gender;
    
        return gender;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmName</Name>
				<Source><![CDATA[
    public HMRegistrationRequestName parmName(HMRegistrationRequestName _name = name)
    {
        name = _name;
    
        return name;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmNationalId</Name>
				<Source><![CDATA[
    public HMRegistrationRequestNationalId parmNationalId(HMRegistrationRequestNationalId _nationalId = nationalId)
    {
        nationalId = _nationalId;
    
        return nationalId;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmReasonTable</Name>
				<Source><![CDATA[
    public RecId parmReasonTable(RecId _reasonTable = reasonTable)
    {
        reasonTable = _reasonTable;
    
        return reasonTable;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmRecId</Name>
				<Source><![CDATA[
    public RecId parmRecId(RecId _recId = recId)
    {
        recId = _recId;
    
        return recId;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmRequestNumber</Name>
				<Source><![CDATA[
    public HMRegistrationRequestNumber parmRequestNumber(HMRegistrationRequestNumber _requestNumber = requestNumber)
    {
        requestNumber = _requestNumber;
    
        return requestNumber;
    }

]]></Source>
			</Method>
			<Method>
				<Name>parmTokenNumber</Name>
				<Source><![CDATA[
    public HMRegistrationRequestTokenNumber parmTokenNumber(HMRegistrationRequestTokenNumber _tokenNumber = tokenNumber)
    {
        tokenNumber = _tokenNumber;
    
        return tokenNumber;
    }

]]></Source>
			</Method>
			<Method>
				<Name>validateCancel</Name>
				<Source><![CDATA[
    private boolean validateCancel()
    {
        boolean ret = true;
    
        if(!this.parmRecId())
        {
            warning(strFmt("@MAZ8818"));
            ret = false;
        }
    
        if(!this.parmReasonTable())
        {
            warning(strFmt("@SYS84753","@SYS86426"));
            ret = false;
        }
    
        return ret;
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMPatientStickerReportDP</Name>
	<SourceCode>
		<Declaration><![CDATA[
[
    SRSReportParameterAttribute(classstr(HMPatientStickerReportContract))
]
public class HMPatientStickerReportDP extends SRSReportDataProviderBase
{
    HMPatientStickerReportTmp   patientStickerReportTmp;
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>getPatientStickerReportTmp</Name>
				<Source><![CDATA[
    [
        SRSReportDataSetAttribute('HMPatientStickerReportTmp')
    ]
    public HMPatientStickerReportTmp getPatientStickerReportTmp()
    {
        select patientStickerReportTmp;
    
        return patientStickerReportTmp;
    }

]]></Source>
			</Method>
			<Method>
				<Name>processReport</Name>
				<Source><![CDATA[
    public void processReport()
    {
        HMPatientStickerReportContract  dataContract;
        HMCase                          hmCase;
        HMPatient                       hmPatient;
        HMClaimTableSetup               claimTableSetup;
        int                             i;
        Qty                             noOfPrints;
        RefRecId                        caseRecId;
        HMCaseNo                        caseNo;
    
        dataContract        = this.parmDataContract() as HMPatientStickerReportContract;
    
        noOfPrints = dataContract.parmNoOfPrints();
        caseNo = dataContract.parmCaseNo();
    
    
        select * from hmCase
            join hmPatient
                where hmCase.HMPatient == hmPatient.RecId
                   && hmCase.CaseNo == caseNo;
    
    
        for (i = 1; i <= noOfPrints; i++)
        {
            patientStickerReportTmp.VisitNo = hmCase.CaseNo;
            patientStickerReportTmp.Physician = hmCase.getAttendingPhysician();
            patientStickerReportTmp.MRNo = CustTable::findRecId(hmPatient.CustTable).AccountNum;
            patientStickerReportTmp.TypeOfAdmission = HMClaimTableSetup::findByRecEnum(hmCase.HMPatientStatus, HMClaimEnumList::PatientStatus).Description;
            patientStickerReportTmp.PatientName = CustTable::findRecId(hmPatient.CustTable).name();
            patientStickerReportTmp.SEx = hmPatient.Gender;
            patientStickerReportTmp.DateOfSub = DateTimeUtil::date(hmCase.AddmisionDate);
            patientStickerReportTmp.DOS = hmPatient.BirthDate;
            patientStickerReportTmp.Age = hmPatient.HMAgeValue;
            patientStickerReportTmp.insert();
        }
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
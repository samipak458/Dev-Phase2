<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMClaimEDI837</Name>
	<SourceCode>
		<Declaration><![CDATA[
class HMClaimEDI837
{
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>main</Name>
				<Source><![CDATA[
    public static void main(Args _args)
    {
         #Task
        HMClaimTable    hmClaimTable;
        HMEDI837XMLCreate hmEDI837XMLCreate;
        List              list;
        FormRun           formRun;
        FormDataSource      fds;
    
    
        if (_args.menuItemName() == menuitemActionStr(HMClaimEDITrigger837))
        {
            HMEDI837XMLCreate::fillTriggerXML();
        }
        else
        {
            list = new List(Types::Record);
            fds = FormDataUtil::getFormDataSource(_args.record());
            setPrefix(strFmt("Claim generation process started"));
            hmClaimTable = fds.getFirst(true);
            while(hmClaimTable)
            {
                list.addEnd(hmClaimTable);
                hmClaimTable = fds.getNext();
            }
            if(list.empty())
            {
                throw warning("No records marked for EDI generation");
            }
            hmEDI837XMLCreate = new hmEDI837XMLCreate();
    
            hmEDI837XMLCreate.processClaim(list, _args.menuItemName() == menuitemActionStr(HMClaimEDI837Validate) ? true : false);
    
        }
    
        formRun = _args.caller();
         if(formRun)
        {
            formRun.task(#taskF5);
        }
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
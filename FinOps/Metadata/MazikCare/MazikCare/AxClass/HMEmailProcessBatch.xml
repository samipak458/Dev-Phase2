<?xml version="1.0" encoding="utf-8"?>
<AxClass xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMEmailProcessBatch</Name>
	<SourceCode>
		<Declaration><![CDATA[
class HMEmailProcessBatch extends RunBaseBatch
{
    #DEFINE.CurrentVersion(1)
    #LOCALMACRO.CurrentList
    #ENDMACRO

}
]]></Declaration>
		<Methods>
			<Method>
				<Name>pack</Name>
				<Source><![CDATA[
    public container pack()
    {   
        super();
        return conNull();
    }

]]></Source>
			</Method>
			<Method>
				<Name>run</Name>
				<Source><![CDATA[
    public void run()
    {
        BatchJobHistory     batchJobHistory;
        date runDate, currentDate;
    
        currentDate = DateTimeUtil::getToday(DateTimeUtil::getUserPreferredTimeZone());
    
        HMEmailGeneration::emailReminderDetails(currentDate);
    
        while select EndDateTime from batchJobHistory
            order by EndDateTime desc
            where batchJobHistory.BatchJobId == this.parmCurrentBatch().BatchJobId
            && batchJobHistory.Status == BatchStatus::Finished
        {
            runDate = DateTimeUtil::date(batchJobHistory.EndDateTime);
    
            if(runDate == (currentDate -1) || runDate == currentDate)
            {
                break;
            }
            else
            {
                currentDate = currentDate - 1;
                HMEmailGeneration::emailReminderDetails(currentDate);
            }
        }
    
    
    }

]]></Source>
			</Method>
			<Method>
				<Name>unpack</Name>
				<Source><![CDATA[
    public boolean unpack(container packedClass)
    {
        return true;
    }

]]></Source>
			</Method>
			<Method>
				<Name>description</Name>
				<Source><![CDATA[
    client server static ClassDescription description()
    {
        return "@MAZ10789";
    }

]]></Source>
			</Method>
			<Method>
				<Name>main</Name>
				<Source><![CDATA[
    static void main(Args _args)
    {
        HMEmailProcessBatch      runBaseBatch = new HMEmailProcessBatch();
    
        if( runBaseBatch.prompt() )
        {
            runBaseBatch.runOperation();
        }
    }

]]></Source>
			</Method>
			<Method>
				<Name>canRunInNewSession</Name>
				<Source><![CDATA[
    protected boolean canRunInNewSession()
    {
        return false;
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
</AxClass>
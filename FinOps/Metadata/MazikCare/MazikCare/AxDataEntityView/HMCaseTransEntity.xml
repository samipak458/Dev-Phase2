<?xml version="1.0" encoding="utf-8"?>
<AxDataEntityView xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
	<Name>HMCaseTransEntity</Name>
	<SourceCode>
		<Declaration><![CDATA[
public class HMCaseTransEntity extends common
{
}
]]></Declaration>
		<Methods>
			<Method>
				<Name>insert</Name>
				<Source><![CDATA[
    /// <summary>
    ///
    /// </summary>
    public void insert()
    {
        InventDimParm                           inventDimParm;
        InventTable                             inventTable = InventTable::find(this.ItemId);
        InventDim                               inventDim;
        HMOrganizationalUnit                    orgUnit;
        PriceDisc   PriceDisc;
        CustTable   custTable = CustTable::findRecId(HMCase::find(this.HMCase).HMPatient);
        AmountMST   price;
        HMCaseService   caseService= new HMCaseService();


        inventDimParm =  InventDimParm::activeDimFlag(InventDimGroupSetup::newInventTable(inventTable));
        inventDim = inventDim::findOrCreateBlank();
                
        select InventLocation,WMSLocation from orgunit
            where orgUnit.recid == 5637144577;

        if (orgUnit)
        {
            inventDim.clear();
            inventDim.InventLocationId = orgUnit.InventLocation;
            inventDim.InventSiteId = InventLocation::find(orgUnit.InventLocation).InventSiteId;
            inventDim.wMSLocationId = orgUnit.WMSLocation;
            //commented as per requirement
            //if(inventDimParm.InventBatchIdFlag)
            //{
            //if(_urgency == HMUrgency::Stat)
            //{
            //inventDim.inventBatchId = hmCaseTrans.pickBatchId(inventTable.ItemId, inventDim);
            //}
            //}
            inventDim = InventDim::findOrCreate(inventDim);
        }
        

        this.Qty = 1;
        this.OrderedQty = 1;

        this.PatientResponsibility = HMPatientPaymentResponsibility::Patient;

        this.HMOrganizationalUnit = 5637144577;
        this.InventDim = inventDim.inventDimId;

        priceDisc = new PriceDisc(ModuleInventPurchSales::Sales, this.ItemId,
                    inventDim,
                    inventTable.salesUnitId(),
                    DateTimeUtil::getToday(DateTimeUtil::getUserPreferredTimeZone()),
                    1,
                    CustTable.AccountNum,
                    CustTable::find(CustTable.AccountNum).Currency);

        if (priceDisc.findPrice(CustTable.PriceGroup))
                    price = priceDisc.price();
        else if (priceDisc.findItemPrice())
                    price = priceDisc.price();

       

        this.SalesPrice = price;
        //this.TotalAmount = hmCaseTrans.getTotalAmount();

        super();

        caseService.createChargeEntryLine(this.RecId);
    }

]]></Source>
			</Method>
		</Methods>
	</SourceCode>
	<ConfigurationKey>MazikCare</ConfigurationKey>
	<Label>HMCaseTransEntity</Label>
	<IsPublic>Yes</IsPublic>
	<PrimaryCompanyContext>DataAreaId</PrimaryCompanyContext>
	<PrimaryKey>EntityKey</PrimaryKey>
	<PublicCollectionName>HMCaseTrans</PublicCollectionName>
	<PublicEntityName>HMCaseTrans</PublicEntityName>
	<SupportsSetBasedSqlOperations>Yes</SupportsSetBasedSqlOperations>
	<DeleteActions />
	<FieldGroups>
		<AxTableFieldGroup>
			<Name>AutoReport</Name>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoLookup</Name>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoIdentification</Name>
			<AutoPopulate>Yes</AutoPopulate>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoSummary</Name>
			<Fields />
		</AxTableFieldGroup>
		<AxTableFieldGroup>
			<Name>AutoBrowse</Name>
			<Fields />
		</AxTableFieldGroup>
	</FieldGroups>
	<Fields>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>AlternatDrugStatus</Name>
			<DataField>AlternatDrugStatus</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>AlternatePrimaryCaseTransId</Name>
			<DataField>AlternatePrimaryCaseTransId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>BillingStatus</Name>
			<DataField>BillingStatus</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>CashAmount</Name>
			<DataField>CashAmount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>CreatedBy1</Name>
			<DataField>CreatedBy</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>CreatedDateTime1</Name>
			<DataField>CreatedDateTime</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>CRMOrderId</Name>
			<DataField>CRMOrderId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DataAreaId1</Name>
			<DataField>DataAreaId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>Deductible</Name>
			<DataField>Deductible</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DeductibleActual</Name>
			<DataField>DeductibleActual</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DeductibleCollectionDate</Name>
			<DataField>DeductibleCollectionDate</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DeductiblePercentage</Name>
			<DataField>DeductiblePercentage</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DeductiblePerUnit</Name>
			<DataField>DeductiblePerUnit</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DefaultDimension</Name>
			<AccessModifier>Private</AccessModifier>
			<DataField>DefaultDimension</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>Discount</Name>
			<DataField>Discount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DiscountAmount</Name>
			<DataField>DiscountAmount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DiscPercent1</Name>
			<DataField>DiscPercent1</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>DiscPercent2</Name>
			<DataField>DiscPercent2</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>ExpectedAmount</Name>
			<DataField>ExpectedAmount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMCase</Name>
			<DataField>HMCase</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMClaimTableSetup_PatientStatus</Name>
			<DataField>HMClaimTableSetup_PatientStatus</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMItemCptPcsCodes</Name>
			<DataField>HMItemCptPcsCodes</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMOrganizationalUnit</Name>
			<DataField>HMOrganizationalUnit</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMPatient</Name>
			<DataField>HMPatient</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMResourceSchedulingAppointment</Name>
			<DataField>HMResourceSchedulingAppointment</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMResourceSchedulingAppointmentInvent</Name>
			<DataField>HMResourceSchedulingAppointmentInvent</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>HMServiceStatus</Name>
			<DataField>HMServiceStatus</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>Instructions</Name>
			<DataField>Instructions</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>InsuranceAmount</Name>
			<DataField>InsuranceAmount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>InventDim</Name>
			<DataField>InventDim</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>IsPPS</Name>
			<DataField>IsPPS</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>ItemId</Name>
			<DataField>ItemId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>ItemName</Name>
			<DataField>ItemName</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>ModifiedBy1</Name>
			<DataField>ModifiedBy</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>ModifiedDateTime1</Name>
			<DataField>ModifiedDateTime</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>OrderedQty</Name>
			<DataField>OrderedQty</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>ParentCaseTransId</Name>
			<DataField>ParentCaseTransId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>Partition1</Name>
			<DataField>Partition</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>PatientResponsibility</Name>
			<DataField>PatientResponsibility</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>PharmacyBatchId</Name>
			<DataField>PharmacyBatchId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>PreAuthorizationNumber</Name>
			<DataField>PreAuthorizationNumber</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>PreAuthorizationStatus</Name>
			<DataField>PreAuthorizationStatus</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>PreAuthValidDate</Name>
			<DataField>PreAuthValidDate</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>Protocol</Name>
			<DataField>Protocol</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>Qty</Name>
			<DataField>Qty</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>RecId1</Name>
			<DataField>RecId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>RecVersion1</Name>
			<DataField>RecVersion</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>RelatedAppointmentRecId</Name>
			<DataField>RelatedAppointmentRecId</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>RemainingBillAmount</Name>
			<DataField>RemainingBillAmount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>ReportUrl</Name>
			<DataField>ReportUrl</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>SalesPrice</Name>
			<DataField>SalesPrice</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>SettledAmount</Name>
			<DataField>SettledAmount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>TotalAmount</Name>
			<DataField>TotalAmount</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>Urgency</Name>
			<DataField>Urgency</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
		<AxDataEntityViewField xmlns=""
			i:type="AxDataEntityViewMappedField">
			<Name>WriteOff</Name>
			<DataField>WriteOff</DataField>
			<DataSource>HMCaseTrans</DataSource>
		</AxDataEntityViewField>
	</Fields>
	<Keys>
		<AxDataEntityViewKey>
			<Name>EntityKey</Name>
			<Fields />
		</AxDataEntityViewKey>
	</Keys>
	<Mappings />
	<Ranges />
	<Relations />
	<StateMachines />
	<ViewMetadata>
		<Name>Metadata</Name>
		<SourceCode>
			<Methods>
				<Method>
					<Name>classDeclaration</Name>
					<Source><![CDATA[
[Query]
public class Metadata extends QueryRun
{
}
]]></Source>
				</Method>
			</Methods>
		</SourceCode>
		<DataSources>
			<AxQuerySimpleRootDataSource>
				<Name>HMCaseTrans</Name>
				<DynamicFields>Yes</DynamicFields>
				<Table>HMCaseTrans</Table>
				<DataSources />
				<DerivedDataSources />
				<Fields />
				<Ranges />
				<GroupBy />
				<Having />
				<OrderBy />
			</AxQuerySimpleRootDataSource>
		</DataSources>
	</ViewMetadata>
</AxDataEntityView>